<div class="flex h-[calc(100vh-65px)] w-full flex-col bg-[#121212] font-sans text-white overflow-hidden">
    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto relative no-scrollbar scroll-smooth p-4 md:p-8">

        <!-- Intro Section -->
        <div class="mb-12 md:mb-16">
            <div class="text-center mb-10">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-3 tracking-tight">
                    Khóa học Ngữ pháp
                </h1>
                <p class="text-lg text-[#a0a0a0] max-w-2xl mx-auto">
                    Bắt đầu hành trình chinh phục ngữ pháp tiếng Anh theo chủ đề và cấp độ.
                </p>
            </div>

            <!-- Search & Filter Section -->
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <!-- Large Search Input -->
                <div class="relative w-full md:flex-1">
                    <span
                        class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-teal-400/70 text-2xl">search</span>
                    <input type="search" placeholder="Tìm kiếm chủ đề ngữ pháp..."
                        class="w-full bg-[#1e1e1e] border border-[#2c2c2c] rounded-lg pl-14 pr-4 py-3 text-lg text-white placeholder:text-[#a0a0a0]/70 focus:ring-2 focus:ring-[#2dd4bf] focus:outline-none focus:border-[#2dd4bf] transition-all duration-300 shadow-lg shadow-teal-500/5">
                </div>

                <!-- Category Filter Pills -->
                <div
                    class="flex flex-wrap justify-center space-x-1 bg-[#1e1e1e] p-1.5 rounded-lg shadow-lg border border-[#2c2c2c]">
                    <button *ngFor="let filter of filters" (click)="setFilter(filter.id)"
                        class="px-4 py-2 text-sm font-semibold rounded-md transition-colors whitespace-nowrap"
                        [ngClass]="activeFilter === filter.id 
              ? 'text-[#121212] bg-[#2dd4bf]' 
              : 'text-[#a0a0a0] hover:bg-[#2c2c2c] hover:text-white'">
                        {{ filter.label }}
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 animate-pulse pb-20">
            <div *ngFor="let i of [1,2,3,4,5,6,7,8]" class="w-full h-80 bg-[#1e1e1e] rounded-xl"></div>
        </div>

        <!-- Grammar Cards Grid -->
        <div *ngIf="!isLoading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 pb-20">
            <ng-container *ngFor="let category of displayCategories">
                <ng-container *ngFor="let topic of category.topics">
                    <app-content-card *ngFor="let rule of topic.rules; let i = index" [data]="{
              id: rule.id.toString(),
              title: rule.name_vi,
              description: (rule.usages && rule.usages.length > 0 ? rule.usages[0].title : rule.structure) || '',
              badge: rule.name_en,
              metaInfo: [
                { icon: 'schedule', text: '10 phút' }
              ],
              routePath: '/grammar'
            }" [index]="i">
                    </app-content-card>
                </ng-container>
            </ng-container>
        </div>
    </main>
</div>