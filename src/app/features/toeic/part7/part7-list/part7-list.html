<!-- 
    Part 7 List - Reading Passages
    Flow: User selects a passage → Navigate to Part 7 Reading
-->
<div class="flex h-[calc(100vh-65px)] w-full flex-col bg-[#0f172a] font-sans text-white overflow-hidden">
    <!-- Header -->
    <header class="border-b border-white/5 bg-[#0f172a]/95 backdrop-blur-xl px-4 py-4 md:px-8 z-20 shadow-sm">
        <div class="mx-auto w-full flex items-center gap-2 text-sm font-medium">
            <a routerLink="/" class="text-slate-400 hover:text-white transition-colors">Trang chủ</a>
            <span class="material-symbols-outlined text-slate-600 text-xs">chevron_right</span>
            <a routerLink="/toeic" class="text-slate-400 hover:text-white transition-colors">TOEIC</a>
            <span class="material-symbols-outlined text-slate-600 text-xs">chevron_right</span>
            <span class="text-white">Part 7 - Đọc hiểu</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto relative no-scrollbar scroll-smooth">
        <div class="mx-auto w-full max-w-7xl p-4 md:p-8 min-h-full">

            <!-- Title Section -->
            <div class="mb-8">
                <div class="inline-flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 rounded-full mb-3">
                    <span class="material-symbols-outlined text-emerald-400 text-sm">menu_book</span>
                    <span class="text-emerald-400 text-xs font-medium">Part 7</span>
                </div>
                <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">Đọc Hiểu TOEIC</h1>
                <p class="text-slate-400">Luyện tập đọc và trả lời câu hỏi với các bài đọc thực tế</p>
            </div>

            <!-- Set Tabs -->
            <div class="flex gap-2 mb-8 overflow-x-auto pb-2 no-scrollbar">
                <button *ngFor="let set of sets" (click)="selectSet(set.id)"
                    class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all" [ngClass]="{
                            'bg-emerald-500 text-white': selectedSetId === set.id,
                            'bg-white/5 text-slate-400 hover:bg-white/10': selectedSetId !== set.id
                        }">
                    {{ set.name }}
                </button>
            </div>

            <!-- Loading State -->
            <div *ngIf="isLoading" class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-pulse">
                <div *ngFor="let i of [1,2,3,4]" class="h-48 bg-white/5 rounded-xl"></div>
            </div>

            <!-- Current Set Info -->
            <div *ngIf="!isLoading && currentSet" class="mb-6">
                <p class="text-slate-400 text-sm">{{ currentSet.description }}</p>
            </div>

            <!-- Passages Grid -->
            <div *ngIf="!isLoading && currentSet" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <a *ngFor="let passage of currentSet.passages; let i = index"
                    [routerLink]="['/toeic/part7', passage.id]"
                    class="group relative flex flex-col p-6 bg-white/5 rounded-xl border border-white/10 hover:border-emerald-500/50 hover:bg-white/10 transition-all duration-300 cursor-pointer overflow-hidden">

                    <!-- Top Row -->
                    <div class="flex items-start justify-between mb-4">
                        <!-- Type Icon -->
                        <div
                            class="flex items-center justify-center w-12 h-12 bg-emerald-500/20 rounded-xl group-hover:bg-emerald-500/30 transition-colors">
                            <span class="material-symbols-outlined text-emerald-400 text-2xl">{{
                                getTypeIcon(passage.type) }}</span>
                        </div>

                        <!-- Difficulty Badge -->
                        <span class="px-3 py-1 rounded-full text-xs font-medium"
                            [ngClass]="getDifficultyColor(passage.difficulty)">
                            {{ getDifficultyLabel(passage.difficulty) }}
                        </span>
                    </div>

                    <!-- Content -->
                    <div class="flex-grow">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-emerald-400 text-xs font-medium">{{ getTypeLabel(passage.type) }}</span>
                        </div>
                        <h3 class="text-lg font-semibold text-white mb-2">{{ passage.title }}</h3>
                        <p class="text-slate-400 text-sm line-clamp-2">{{ passage.content.substring(0, 100) }}...</p>
                    </div>

                    <!-- Stats -->
                    <div class="flex items-center gap-4 mt-4 pt-4 border-t border-white/5">
                        <div class="flex items-center gap-1 text-slate-400 text-xs">
                            <span class="material-symbols-outlined text-sm">quiz</span>
                            <span>{{ passage.questions.length }} câu hỏi</span>
                        </div>
                        <div class="flex items-center gap-1 text-slate-400 text-xs">
                            <span class="material-symbols-outlined text-sm">schedule</span>
                            <span>~{{ passage.questions.length * 2 }} phút</span>
                        </div>
                    </div>

                    <!-- Hover Arrow -->
                    <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="material-symbols-outlined text-emerald-400">arrow_forward</span>
                    </div>
                </a>
            </div>

            <!-- Empty State -->
            <div *ngIf="!isLoading && (!currentSet || currentSet.passages.length === 0)" class="text-center py-16">
                <span class="material-symbols-outlined text-slate-600 text-6xl mb-4">menu_book</span>
                <p class="text-slate-400">Chưa có bài đọc nào trong bộ này</p>
            </div>
        </div>
    </main>
</div>